{"id":"dumtasking-00w","title":"Table View with TanStack Table","description":"## Context\nUpgrade table view with TanStack Table for inline editing and advanced features.\n\n## Risk: MEDIUM\nComplex table state management.\n\n## Dependencies to Install\n```bash\nbun add @tanstack/react-table\n```\n\n## File Scope\n- app/(dashboard)/table/page.tsx\n- components/views/TableView.tsx\n\n## Acceptance Criteria\n- [ ] TanStack Table v8 integration\n- [ ] Columns: Title, Status, Priority, Due Date, Estimated Time, Goal, Tags, Created, Completed\n- [ ] Inline editing for Title (text input)\n- [ ] Inline editing for Status (dropdown)\n- [ ] Inline editing for Priority (dropdown)\n- [ ] Inline editing for Due Date (date picker)\n- [ ] Sortable columns (click header)\n- [ ] Multi-select filters (status, priority, goal)\n- [ ] Full-text search across title/description\n- [ ] Pagination (50 rows per page)\n- [ ] Column show/hide toggle\n- [ ] Column reorder (drag column headers)\n\n## Dependencies\n- Tasks API: dumtasking-3dz","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:16.0761428+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:16.0761428+07:00","dependencies":[{"issue_id":"dumtasking-00w","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:44:16.0776863+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-0or","title":"State: Setup Zustand Store \u0026 Supabase Realtime","description":"## Context\nSetup Zustand for UI state and Supabase Realtime for data sync.\n\n## Risk: MEDIUM\nRealtime subscriptions need careful cleanup to avoid memory leaks.\n\n## File Scope\n- stores/ui-store.ts\n- stores/notes-store.ts\n- stores/tasks-store.ts\n- hooks/useRealtimeSync.ts\n\n## Acceptance Criteria\n- [ ] Zustand store for UI: sidebarOpen, activeModal, filters\n- [ ] Notes store with optimistic updates\n- [ ] Tasks store with optimistic updates\n- [ ] Supabase Realtime subscription for notes table\n- [ ] Supabase Realtime subscription for tasks table\n- [ ] Subscription cleanup on unmount\n- [ ] Optimistic UI: update locally, then sync with server\n- [ ] Rollback on API error with error toast","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:57.3987068+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:12:03.7592627+07:00","dependencies":[{"issue_id":"dumtasking-0or","depends_on_id":"dumtasking-yhp","type":"blocks","created_at":"2026-01-19T15:03:23.1144681+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-0or","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:37.5775962+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-179","title":"Notes: Create Note Detail Page with Editor","description":"## Context\nIntegrate Tiptap editor into note detail page with auto-save to backend.\n\n## Risk: LOW\nIntegration of existing components.\n\n## File Scope\n- app/(dashboard)/notes/[id]/page.tsx\n\n## Acceptance Criteria\n- [ ] Note detail page uses NoteEditor component\n- [ ] Load note content from /api/notes/[id]\n- [ ] Auto-save to PATCH /api/notes/[id] every 2 seconds (debounced)\n- [ ] Show save status indicator (Saving.., Saved, Error)\n- [ ] Handle concurrent edits (optimistic UI + conflict resolution)\n- [ ] Title inline edit (contentEditable)\n- [ ] Breadcrumb navigation (Notes / Note Title)\n- [ ] Delete button with confirmation dialog\n- [ ] Share button (future: generate public link)\n- [ ] Back button to notes list\n\n## Dependencies\n- Tiptap Integration: dumtasking-25c\n- Notes API: dumtasking-92i","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:45.0802491+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:42:49.1389128+07:00","dependencies":[{"issue_id":"dumtasking-179","depends_on_id":"dumtasking-25c","type":"blocks","created_at":"2026-01-19T15:03:15.5996516+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-179","depends_on_id":"dumtasking-92i","type":"blocks","created_at":"2026-01-19T15:03:15.9927246+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-179","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:36.466078+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-17z","title":"Phase 3: Views \u0026 Interactions","description":"Weeks 7-9: Realtime, Kanban, Calendar, Table - Multiple views","status":"open","priority":1,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:58:49.4704116+07:00","created_by":"mthangtr","updated_at":"2026-01-19T14:58:49.4704116+07:00","dependencies":[{"issue_id":"dumtasking-17z","depends_on_id":"dumtasking-tof","type":"blocks","created_at":"2026-01-19T14:58:49.4714998+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-17z","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T14:59:08.9671445+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-1h3","title":"Root Middleware: Wire Up Auth Protection","description":"## Context\nCreate middleware.ts in root to enable server-side auth protection for all dashboard routes.\n\n## Risk: LOW\nPattern exists in lib/supabase/middleware.ts, just need to wire up.\n\n## File Scope\n- middleware.ts (root)\n- lib/supabase/middleware.ts (reference)\n\n## Acceptance Criteria\n- [ ] middleware.ts created in root\n- [ ] Imports updateSession from lib/supabase/middleware\n- [ ] Protects routes: /notes, /tasks, /kanban, /calendar, /table, /focus, /settings\n- [ ] Auto-redirects authenticated users from /login to /notes\n- [ ] Handles redirectTo query param for post-login navigation\n- [ ] Tested: Unauthenticated access redirects to /login\n\n## Dependencies\nRequires auth system (already complete)","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:13.722499+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:22:16.4512587+07:00","closed_at":"2026-01-19T21:22:16.4512587+07:00","close_reason":"Already implemented in proxy.ts (Next.js 16 pattern). Auth protection working correctly."}
{"id":"dumtasking-25c","title":"Notes: Implement Tiptap Rich Text Editor","description":"## Context\nIntegrate Tiptap rich text editor with auto-save functionality.\n\n## Risk: MEDIUM\nExternal library integration, need to handle SSR issues.\n\n## File Scope\n- components/notes/NoteEditor.tsx\n- lib/tiptap/extensions.ts\n- lib/tiptap/config.ts\n\n## Acceptance Criteria\n- [ ] Tiptap editor with extensions: StarterKit, Placeholder, Link, CodeBlockLowlight\n- [ ] Formatting: bold, italic, strike, code, headings (1-3), lists (bullet, ordered), blockquote\n- [ ] Markdown shortcuts (** for bold, # for heading, etc.)\n- [ ] Character/word count display in toolbar\n- [ ] onChange callback with debounce (2s) for auto-save\n- [ ] Content stored as Tiptap JSON (JSONB)\n- [ ] SSR-safe (use 'use client' directive)\n- [ ] Responsive height (min-height, grows with content)\n- [ ] Focus mode (distraction-free)\n- [ ] Keyboard shortcuts (Cmd/Ctrl+B, I, etc.)\n\n## Dependencies\n- Database Migration 003: dumtasking-9w0","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:37.0464284+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:42:35.6438657+07:00","dependencies":[{"issue_id":"dumtasking-25c","depends_on_id":"dumtasking-p70","type":"blocks","created_at":"2026-01-19T15:03:14.1145439+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-25c","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:36.1175026+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-25c","depends_on_id":"dumtasking-9w0","type":"blocks","created_at":"2026-01-19T19:42:40.3598438+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-2cr","title":"Protected Slots CRUD API","description":"## Context\nImplement CRUD API for protected time slots.\n\n## Risk: LOW\nStandard CRUD with date/time handling.\n\n## File Scope\n- app/api/protected-slots/route.ts (GET, POST)\n- app/api/protected-slots/[id]/route.ts (GET, PATCH, DELETE)\n\n## Acceptance Criteria\n- [ ] POST /api/protected-slots creates slot\n  - Fields: day_of_week (0-6), start_time, end_time, slot_type, label\n- [ ] GET /api/protected-slots returns user's slots\n- [ ] PATCH /api/protected-slots/[id] updates slot\n- [ ] DELETE /api/protected-slots/[id] deletes slot\n- [ ] Validation: start_time \u003c end_time\n- [ ] Validation: no overlapping slots for same day\n- [ ] slot_type: focus, break, meeting, personal\n- [ ] Response includes calculated duration\n\n## Dependencies\nNone (independent feature)","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:14.6838037+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:14.6838037+07:00"}
{"id":"dumtasking-2gu","title":"Compassionate Accountability Flow","description":"## Context\nImplement evening motivation drop handling with compassionate options.\n\n## Risk: LOW\nUI flow + simple logic.\n\n## File Scope\n- components/accountability/EveningCheck.tsx\n- lib/accountability/motivation-detector.ts\n\n## Acceptance Criteria\n- [ ] Evening detection: 6pm-10pm user's timezone\n- [ ] Modal appears for incomplete scheduled tasks\n- [ ] Options for each task:\n  - Defer to tomorrow\n  - Move to weekend\n  - Cancel (with reason)\n  - Mark as done anyway\n- [ ] Philosophical quote display (Vietnamese + English)\n- [ ] Quote rotation (randomized from lib/mock-data.ts)\n- [ ] Non-judgmental language ('No problem', 'It happens')\n- [ ] Behavior logging (for pattern analysis)\n- [ ] Optional: Reflection prompt ('How are you feeling?')\n- [ ] Save responses to weekly_reviews table\n\n## Quote Examples\nFrom SYSTEM_SPEC §Feature 10\n\n## Dependencies\n- Tasks API: dumtasking-3dz","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:51.1249915+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:51.1249915+07:00","dependencies":[{"issue_id":"dumtasking-2gu","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:45:51.1260394+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-2ln","title":"Layout: Create Dashboard Shell with Sidebar \u0026 Header","description":"## Context\nCreate responsive dashboard layout with sidebar navigation and header.\n\n## Risk: LOW\nUI component, no external dependencies.\n\n## File Scope\n- app/(dashboard)/layout.tsx\n- components/layout/Sidebar.tsx\n- components/layout/Header.tsx\n- components/layout/DashboardLayout.tsx\n\n## Acceptance Criteria\n- [ ] Dashboard layout with sidebar, header, main content area\n- [ ] Sidebar: Logo, nav links (Notes, Kanban, Calendar, Table, Settings)\n- [ ] Sidebar collapsible on mobile (hamburger menu)\n- [ ] Header: User avatar, sign out button\n- [ ] Active route highlighted in sidebar\n- [ ] Placeholder slot for ChatWidget (bottom-right)\n- [ ] Responsive: mobile-first, works on all screen sizes\n- [ ] Uses shadcn/ui Sheet for mobile nav","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:36.7421523+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:39:12.9457204+07:00","closed_at":"2026-01-19T19:39:12.9457204+07:00","close_reason":"UI already complete - layout components exist in codebase","dependencies":[{"issue_id":"dumtasking-2ln","depends_on_id":"dumtasking-p70","type":"blocks","created_at":"2026-01-19T15:03:09.359141+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-2ln","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:35.9410028+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-2yv","title":"Focus Mode Ambient Audio Player","description":"## Context\nAdd ambient sound player to Focus Mode for concentration.\n\n## Risk: LOW\nHTML5 Audio API usage.\n\n## File Scope\n- components/focus/AudioPlayer.tsx\n- public/sounds/ (audio files)\n\n## Acceptance Criteria\n- [ ] Audio player UI in Focus Mode\n- [ ] Sound options:\n  - White noise\n  - Rain\n  - Coffee shop ambiance\n  - Forest sounds\n  - Ocean waves\n- [ ] Volume control slider\n- [ ] Mute/Unmute toggle\n- [ ] Audio loops continuously\n- [ ] Persists selection in localStorage\n- [ ] Preload audio files\n- [ ] Works in PiP mode (audio continues)\n- [ ] Mobile-friendly controls\n\n## Audio Sources\nUse royalty-free sounds from:\n- Freesound.org\n- OR generate with AI (ElevenLabs)\n\n## Dependencies\n- Focus PiP Timer: dumtasking-zdc","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:48.8265606+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:48.8265606+07:00","dependencies":[{"issue_id":"dumtasking-2yv","depends_on_id":"dumtasking-zdc","type":"blocks","created_at":"2026-01-19T19:44:48.8276654+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-39x","title":"Spike: Context Injection Pattern","description":"## Time-box\n30 minutes\n\n## Output Location\n.spikes/ai-integration/06-context-injection/\n\n## Question\nHow to inject user tasks, notes, calendar data as context for AI?\n\n## Success Criteria\n- [ ] Context builder function created\n- [ ] User tasks/notes formatted for AI prompt\n- [ ] Context limit handling (token management)\n- [ ] Code in .spikes/ai-integration/06-context-injection/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:40:31.1289084+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:36:24.1121968+07:00","closed_at":"2026-01-19T21:36:24.1121968+07:00","close_reason":"YES: Context injection works. Created lib/ai/context.ts with formatters and token management","dependencies":[{"issue_id":"dumtasking-39x","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:40:31.131534+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-39x","depends_on_id":"dumtasking-mfl","type":"blocks","created_at":"2026-01-19T19:40:31.1351482+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-3dz","title":"Tasks: Create Tasks CRUD API","description":"## Context\nCreate Tasks CRUD API with filtering support.\n\n## Risk: LOW\nStandard CRUD pattern, similar to Notes API.\n\n## File Scope\n- app/api/tasks/route.ts (GET with filters, POST)\n- app/api/tasks/[id]/route.ts (GET, PATCH, DELETE)\n- types/task.ts\n\n## Acceptance Criteria\n- [ ] GET /api/tasks supports query params: status, priority, goal, scheduled_at\n- [ ] GET returns { tasks: Task[], count: number }\n- [ ] POST /api/tasks creates task with all fields from schema\n- [ ] PATCH /api/tasks/[id] updates any task field\n- [ ] DELETE /api/tasks/[id] soft-deletes (status=cancelled) or hard-deletes\n- [ ] Proper error responses (400 validation, 404 not found)\n- [ ] TypeScript types match database schema","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:46.659772+07:00","created_by":"mthangtr","updated_at":"2026-01-19T20:20:58.9074894+07:00","closed_at":"2026-01-19T20:20:58.9074894+07:00","close_reason":"Implemented Tasks CRUD API: GET /api/tasks with filters (status, priority, due_date, tags), POST /api/tasks, GET/PATCH/DELETE /api/tasks/[id] with soft/hard delete support, TypeScript types in types/task.ts","dependencies":[{"issue_id":"dumtasking-3dz","depends_on_id":"dumtasking-dua","type":"blocks","created_at":"2026-01-19T15:03:20.27565+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-3dz","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:36.6551899+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-4jy","title":"Weekly Review API with AI Summary","description":"## Context\nAuto-generate weekly review with AI summary and insights.\n\n## Risk: MEDIUM\nRequires scheduled execution (Supabase Edge Function or cron).\n\n## Learnings from Spikes\nUses validated OpenRouter + Claude pattern from spike epic.\n\n## File Scope\n- app/api/weekly-reviews/route.ts (GET, POST)\n- app/api/weekly-reviews/generate/route.ts (POST - trigger)\n- supabase/functions/weekly-review-cron/ (Edge Function)\n\n## Acceptance Criteria\n- [ ] POST /api/weekly-reviews/generate triggers review creation\n- [ ] Weekly review generation:\n  - Completion rate (X/Y tasks, percentage)\n  - Goals distribution (pie chart data)\n  - Pattern recognition (bottlenecks, productive times)\n  - AI-generated suggestions for next week\n- [ ] Schedule: Sunday 8 PM user's timezone (Supabase Cron)\n- [ ] GET /api/weekly-reviews returns past reviews\n- [ ] Response: { review: WeeklyReview, suggestions: string[] }\n- [ ] Store in weekly_reviews table\n- [ ] Unique constraint: user_id + week_start\n\n## Edge Function Setup\n```bash\nsupabase functions new weekly-review-cron\n```\n\n## Dependencies\n- Spike epic (Claude integration): dumtasking-q4r\n- Tasks API: dumtasking-3dz","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:02.3334072+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:02.3334072+07:00","dependencies":[{"issue_id":"dumtasking-4jy","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:46:02.3344877+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-4jy","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:46:02.3360428+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-4s7","title":"Phase 5: Polish","description":"Weeks 13-14: UI/UX Polish, Performance, PWA","status":"open","priority":2,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:58:52.0492264+07:00","created_by":"mthangtr","updated_at":"2026-01-19T14:58:52.0492264+07:00","dependencies":[{"issue_id":"dumtasking-4s7","depends_on_id":"dumtasking-tof","type":"blocks","created_at":"2026-01-19T14:58:52.0504832+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-4s7","depends_on_id":"dumtasking-l7i","type":"blocks","created_at":"2026-01-19T14:59:09.403278+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-5bj","title":"Database Security: Implement Row-Level Security Policies","description":"## Context\nImplement Row-Level Security policies for all user-owned tables.\n\n## Risk: MEDIUM\nSecurity-critical. Must ensure no data leakage between users.\n\n## File Scope\n- supabase/migrations/002_rls_policies.sql\n\n## Acceptance Criteria\n- [ ] RLS enabled on: notes, tasks, protected_slots, chat_messages, weekly_reviews, focus_sessions\n- [ ] SELECT/INSERT/UPDATE/DELETE policies use auth.uid() = user_id\n- [ ] Users table has appropriate policies (users can only see/update own profile)\n- [ ] Service role bypasses RLS for admin operations\n- [ ] Test: Authenticated user cannot see other users data\n- [ ] Test: Unauthenticated requests are rejected","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:26.4050606+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:48:40.3832543+07:00","closed_at":"2026-01-19T15:48:40.3832543+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-5bj","depends_on_id":"dumtasking-dua","type":"blocks","created_at":"2026-01-19T15:03:07.742622+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-5bj","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:30.0667867+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-629","title":"Offline Mode with IndexedDB Sync Queue","description":"## Context\nImplement offline note editing with sync queue using IndexedDB.\n\n## Risk: MEDIUM\nOffline sync logic + conflict resolution.\n\n## Dependencies to Install\n```bash\nbun add idb\n```\n\n## File Scope\n- lib/offline/sync-queue.ts\n- lib/offline/idb.ts\n- hooks/useOfflineSync.ts\n\n## Acceptance Criteria\n- [ ] IndexedDB database: dumtasking-offline\n- [ ] Tables: notes_queue, tasks_queue\n- [ ] Offline note editing:\n  - Save to IndexedDB when offline\n  - Show offline indicator\n  - Queue syncs for later\n- [ ] Background sync when reconnected:\n  - Use navigator.onLine event\n  - Process sync queue\n  - Handle conflicts (last-write-wins)\n- [ ] Conflict resolution UI (if server version newer)\n- [ ] Sync status indicator in UI\n- [ ] Clear queue after successful sync\n- [ ] Offline-first for note content (instant save)\n\n## IndexedDB Schema\n```typescript\n{\n  notes_queue: { id, operation: 'create'|'update'|'delete', data, timestamp }\n}\n```\n\n## Dependencies\n- PWA Configuration: dumtasking-7ot","status":"open","priority":3,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:57.9153825+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:57.9153825+07:00","dependencies":[{"issue_id":"dumtasking-629","depends_on_id":"dumtasking-7ot","type":"blocks","created_at":"2026-01-19T19:46:57.916474+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-65q","title":"AI Task Extraction API","description":"## Context\nImplement /api/ai/extract-tasks endpoint using Claude + Zod for structured output.\n\n## Risk: HIGH → MEDIUM (after spikes)\nExternal API integration. Spikes validate approach.\n\n## Learnings from Spikes\n- Spike dumtasking-x5n: OpenRouter + Claude integration pattern\n- Spike dumtasking-7tc: Zod schema for Task type  \n- Spike dumtasking-t2j: Error handling + retry logic\n- Reference code in .spikes/ai-integration/\n\n## File Scope\n- app/api/ai/extract-tasks/route.ts\n- lib/ai/schemas.ts (Zod schemas)\n- lib/ai/client.ts (OpenRouter client)\n\n## Acceptance Criteria\n- [ ] POST /api/ai/extract-tasks accepts { note_id, content }\n- [ ] Claude 3.7 Sonnet via OpenRouter\n- [ ] Zod schema validation for Task[]\n- [ ] Response: { tasks: Task[], reasoning: string }\n- [ ] Error handling: rate limits, invalid responses\n- [ ] Exponential backoff retry (3 attempts)\n- [ ] Proper task prioritization logic\n- [ ] Dependency detection between tasks\n- [ ] Time estimates for each task\n\n## Dependencies\n- Spike epic: dumtasking-q4r\n- Notes API: dumtasking-92i","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:48.3368255+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:52:22.2989109+07:00","closed_at":"2026-01-19T21:52:22.2989109+07:00","close_reason":"Implemented AI task extraction API with POST /api/ai/extract-tasks endpoint, Zod schemas for ExtractedTask validation, and high-level AI client wrapper using Claude 3.5 Sonnet via OpenRouter with exponential backoff retry","dependencies":[{"issue_id":"dumtasking-65q","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:41:48.3380106+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-65q","depends_on_id":"dumtasking-92i","type":"blocks","created_at":"2026-01-19T19:41:48.3396825+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-6ud","title":"Environment Configuration Documentation","description":"## Context\nDocument all required environment variables and create .env.example file.\n\n## Risk: LOW\nSimple documentation task.\n\n## File Scope\n- .env.example (new)\n- README.md (update)\n- docs/SETUP.md (new)\n\n## Acceptance Criteria\n- [ ] .env.example file created with all variables:\n  - NEXT_PUBLIC_SUPABASE_URL\n  - NEXT_PUBLIC_SUPABASE_ANON_KEY\n  - SUPABASE_SERVICE_ROLE_KEY\n  - OPENROUTER_API_KEY\n  - ENCRYPTION_KEY\n- [ ] Each variable documented with description and format\n- [ ] README.md updated with setup instructions\n- [ ] docs/SETUP.md created with detailed env setup guide\n- [ ] Instructions for generating ENCRYPTION_KEY (32 characters)\n\n## Dependencies\nNone","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:21.2353723+07:00","created_by":"mthangtr","updated_at":"2026-01-20T08:54:39.8155406+07:00","closed_at":"2026-01-20T08:54:39.8155406+07:00","close_reason":"Closed"}
{"id":"dumtasking-74c","title":"Tasks: Create TaskCard \u0026 TaskModal Components","description":"## Context\nCreate reusable task display and edit components.\n\n## Risk: LOW\nUI components using shadcn/ui primitives.\n\n## File Scope\n- components/tasks/TaskCard.tsx\n- components/tasks/TaskModal.tsx\n- components/tasks/TaskQuickActions.tsx\n\n## Acceptance Criteria\n- [ ] TaskCard shows: title, priority badge, time estimate, goal tag\n- [ ] Priority colors: urgent=red, high=orange, medium=yellow, low=gray\n- [ ] TaskCard click opens TaskModal\n- [ ] TaskModal: full task details, inline editing\n- [ ] Status dropdown (todo, in_progress, done, cancelled)\n- [ ] Priority dropdown\n- [ ] Due date picker\n- [ ] Save/Cancel buttons\n- [ ] TaskQuickActions: complete, reschedule, delete (icon buttons)","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:46.8515862+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:39:35.8876006+07:00","closed_at":"2026-01-19T19:39:35.8876006+07:00","close_reason":"UI already complete - TaskCard and TaskModal components exist","dependencies":[{"issue_id":"dumtasking-74c","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T15:03:20.8617831+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-74c","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:36.8289852+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-76f","title":"AI Task Extraction Integration","description":"## Context\nHook up 'Plan this' button to call AI extraction API and create tasks.\n\n## Risk: LOW\nFrontend integration, API already working.\n\n## File Scope\n- app/(dashboard)/notes/[id]/page.tsx\n- components/notes/NoteToolbar.tsx\n\n## Acceptance Criteria\n- [ ] 'Plan this' button calls /api/ai/extract-tasks\n- [ ] Loading state during AI processing\n- [ ] Success: Creates tasks in database via Tasks API\n- [ ] Success: Shows toast with count (e.g., \"Created 5 tasks\")\n- [ ] Success: Links to Kanban board\n- [ ] Error: Shows user-friendly error message\n- [ ] Disable button while processing\n- [ ] Keyboard shortcut: Cmd/Ctrl+Shift+P\n\n## Dependencies\n- AI Extraction API: dumtasking-65q","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:56.3635926+07:00","created_by":"mthangtr","updated_at":"2026-01-19T22:55:27.9659304+07:00","closed_at":"2026-01-19T22:55:27.9659304+07:00","close_reason":"Implemented 'Plan this' button integration: calls /api/ai/extract-tasks, creates tasks from AI results, shows toast notifications with success/error states, added Cmd/Ctrl+Shift+P keyboard shortcut","dependencies":[{"issue_id":"dumtasking-76f","depends_on_id":"dumtasking-65q","type":"blocks","created_at":"2026-01-19T19:41:56.3652614+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-7k8","title":"Settings: Create Settings Page with Profile Section","description":"## Context\nCreate settings page with user profile and preferences.\n\n## Risk: LOW\nForm-based UI, standard patterns.\n\n## File Scope\n- app/(dashboard)/settings/page.tsx\n- components/settings/ProfileSection.tsx\n- components/settings/PreferencesSection.tsx\n- components/settings/PrivacySection.tsx\n\n## Acceptance Criteria\n- [ ] Settings page with tabbed/sectioned layout\n- [ ] Profile: Name input, timezone select, working hours (start/end time)\n- [ ] AI Preferences: LLM model select (Claude, Gemini options)\n- [ ] Privacy: Data export button (JSON), account deletion button\n- [ ] Form validation with error messages\n- [ ] Save button updates user profile via API\n- [ ] Success toast on save\n- [ ] Loading states during save","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:54.0657549+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:39:14.2413244+07:00","closed_at":"2026-01-19T19:39:14.2413244+07:00","close_reason":"UI already complete - Settings page exists with all sections","dependencies":[{"issue_id":"dumtasking-7k8","depends_on_id":"dumtasking-2ln","type":"blocks","created_at":"2026-01-19T15:03:21.7199911+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-7k8","depends_on_id":"dumtasking-dua","type":"blocks","created_at":"2026-01-19T15:03:22.325583+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-7k8","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:37.0129666+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-7mj","title":"Table Export Functionality","description":"## Context\nAdd CSV and JSON export for table data.\n\n## Risk: LOW\nClient-side export generation.\n\n## File Scope\n- components/views/TableView.tsx (extend)\n- lib/export.ts\n\n## Acceptance Criteria\n- [ ] Export button in table toolbar\n- [ ] Export options: CSV, JSON\n- [ ] CSV format: all visible columns\n- [ ] JSON format: full task objects\n- [ ] Date range filter for export\n- [ ] Exports only filtered/searched data (respects current view)\n- [ ] Filename: tasks-YYYY-MM-DD.csv or .json\n- [ ] Browser download trigger\n- [ ] Large dataset handling (\u003e1000 rows)\n\n## Dependencies\n- Table View: dumtasking-00w","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:31.4538506+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:31.4538506+07:00","dependencies":[{"issue_id":"dumtasking-7mj","depends_on_id":"dumtasking-00w","type":"blocks","created_at":"2026-01-19T19:44:31.4691647+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-7ot","title":"PWA Configuration \u0026 Service Worker","description":"## Context\nSetup PWA with next-pwa for installability and offline support.\n\n## Risk: MEDIUM\nService Worker configuration complexity.\n\n## Dependencies to Install\n```bash\nbun add next-pwa workbox-webpack-plugin\n```\n\n## File Scope\n- next.config.ts (extend with next-pwa)\n- public/manifest.json\n- public/icons/ (PWA icons)\n\n## Acceptance Criteria\n- [ ] next-pwa configured in next.config.ts\n- [ ] manifest.json with app metadata:\n  - name, short_name, description\n  - icons (192x192, 512x512)\n  - theme_color, background_color\n  - display: standalone\n  - start_url: /notes\n- [ ] Service Worker auto-generated\n- [ ] Install prompt for desktop (Chrome, Edge)\n- [ ] Install prompt for mobile (iOS, Android)\n- [ ] Offline fallback page\n- [ ] Cache strategy: NetworkFirst for API, CacheFirst for assets\n- [ ] Update notification when new version available\n\n## PWA Icons\nGenerate from logo using realfavicongenerator.net\n\n## Dependencies\nNone","status":"open","priority":3,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:47.8814902+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:47.8814902+07:00"}
{"id":"dumtasking-7tc","title":"Spike: Structured Output with Zod Schemas","description":"## Time-box\n30 minutes\n\n## Output Location\n.spikes/ai-integration/02-zod-structured-output/\n\n## Question\nDoes structured output work with Zod schemas for task extraction?\n\n## Success Criteria\n- [ ] Zod schema defined for Task type\n- [ ] AI returns structured JSON matching schema\n- [ ] Validation errors handled gracefully\n- [ ] Code in .spikes/ai-integration/02-zod-structured-output/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:40:05.0269093+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:30:03.3208157+07:00","closed_at":"2026-01-19T21:30:03.3208157+07:00","close_reason":"YES: Structured output works with generateText + manual JSON parsing","dependencies":[{"issue_id":"dumtasking-7tc","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:40:05.0285519+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-7tc","depends_on_id":"dumtasking-x5n","type":"blocks","created_at":"2026-01-19T19:40:05.0306851+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-7uv","title":"Toast Notifications with Sonner","description":"## Context\nIntegrate Sonner toast notifications for all CRUD operations.\n\n## Risk: LOW\nSonner already installed, just need to wire up.\n\n## File Scope\n- app/layout.tsx (Toaster provider)\n- All pages with mutations (use toast())\n\n## Acceptance Criteria\n- [ ] Toaster component in root layout\n- [ ] Toast notifications for:\n  - Task created (success)\n  - Task updated (success)\n  - Task deleted (success + undo)\n  - Note saved (success)\n  - Error notifications (error variant)\n  - AI extraction started (loading toast)\n  - AI extraction complete (success)\n- [ ] Toast variants: success, error, info, warning, loading\n- [ ] Position: bottom-right\n- [ ] Duration: 3 seconds (configurable)\n- [ ] Undo functionality for delete operations\n- [ ] Dismiss button on all toasts\n- [ ] Stack multiple toasts\n- [ ] Rich content support (icons, actions)\n\n## Sonner Usage\n```typescript\nimport { toast } from 'sonner'\n\ntoast.success('Task created')\ntoast.error('Failed to save note')\ntoast.loading('Extracting tasks...')\n```\n\n## Dependencies\nNone (Sonner already installed)","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:39.3851303+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:39.3851303+07:00"}
{"id":"dumtasking-7zs","title":"Weekly Review UI with Charts","description":"## Context\nCreate UI for viewing weekly reviews with charts and interactive suggestions.\n\n## Risk: MEDIUM\nChart library integration.\n\n## Dependencies to Install\n```bash\nbun add recharts\n```\n\n## File Scope\n- app/(dashboard)/reviews/page.tsx (new route)\n- components/reviews/WeeklyReview.tsx\n- components/reviews/GoalsChart.tsx\n\n## Acceptance Criteria\n- [ ] Weekly review page (/reviews)\n- [ ] Fetch from GET /api/weekly-reviews\n- [ ] Display latest review by default\n- [ ] Week selector (previous weeks dropdown)\n- [ ] Completion rate visualization (progress bar + percentage)\n- [ ] Goals distribution pie chart (Recharts)\n  - Example: Startup 70%, Dev 18%, Japanese 12%\n  - Color-coded by goal\n- [ ] Insights section (bottlenecks, patterns)\n- [ ] AI suggestions list\n- [ ] Interactive suggestions: Click to apply\n  - Example: 'Schedule more Japanese tasks' → opens calendar with Japanese tasks\n- [ ] Generate new review button (manual trigger)\n- [ ] Download review as PDF (future)\n\n## Dependencies\n- Weekly Review API: dumtasking-4jy","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:12.3872612+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:12.3872612+07:00","dependencies":[{"issue_id":"dumtasking-7zs","depends_on_id":"dumtasking-4jy","type":"blocks","created_at":"2026-01-19T19:46:12.3883635+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-89p","title":"Table Bulk Actions","description":"## Context\nAdd bulk actions for multi-select operations in table view.\n\n## Risk: LOW\nStandard bulk operation pattern.\n\n## File Scope\n- components/views/TableView.tsx (extend)\n- components/views/BulkActionsToolbar.tsx\n\n## Acceptance Criteria\n- [ ] Row selection (checkbox column)\n- [ ] Select all / Deselect all\n- [ ] Bulk actions toolbar appears when \u003e0 selected\n- [ ] Bulk status update (dropdown)\n- [ ] Bulk priority update (dropdown)\n- [ ] Bulk delete with confirmation\n- [ ] Bulk reschedule (date picker)\n- [ ] Shows count of selected items\n- [ ] Optimistic UI for bulk operations\n- [ ] Toast notification on success/error\n\n## Dependencies\n- Table View: dumtasking-00w","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:24.0849202+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:24.0849202+07:00","dependencies":[{"issue_id":"dumtasking-89p","depends_on_id":"dumtasking-00w","type":"blocks","created_at":"2026-01-19T19:44:24.0860317+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-92i","title":"Notes: Create Notes List \u0026 CRUD API","description":"## Context\nCreate Notes list page and CRUD API endpoints.\n\n## Risk: LOW\nStandard CRUD pattern with Supabase.\n\n## File Scope\n- app/(dashboard)/notes/page.tsx\n- app/api/notes/route.ts (GET, POST)\n- app/api/notes/[id]/route.ts (GET, PATCH, DELETE)\n- components/notes/NotesList.tsx\n- components/notes/NoteCard.tsx\n\n## Acceptance Criteria\n- [ ] GET /api/notes returns user's notes (sorted by updated_at DESC)\n- [ ] POST /api/notes creates note with title, content\n- [ ] GET /api/notes/[id] returns single note\n- [ ] PATCH /api/notes/[id] updates note\n- [ ] DELETE /api/notes/[id] deletes note\n- [ ] Notes page shows grid/list of NoteCard components\n- [ ] Search input filters notes by title/content\n- [ ] 'New Note' button creates and navigates to new note\n- [ ] Empty state when no notes","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:43.5451947+07:00","created_by":"mthangtr","updated_at":"2026-01-19T20:25:07.8191744+07:00","closed_at":"2026-01-19T20:25:07.8191744+07:00","close_reason":"Implemented Notes CRUD API and UI: GET/POST /api/notes, GET/PATCH/DELETE /api/notes/[id], NoteCard and NotesList components, Notes page with real-time API integration, search filtering, empty state handling","dependencies":[{"issue_id":"dumtasking-92i","depends_on_id":"dumtasking-dua","type":"blocks","created_at":"2026-01-19T15:03:15.0857661+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-92i","depends_on_id":"dumtasking-2ln","type":"blocks","created_at":"2026-01-19T15:03:15.3030742+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-92i","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:36.2958084+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-9el","title":"Related Tasks API","description":"## Context\nImplement related tasks algorithm using simple rule-based scoring (no embeddings).\n\n## Risk: LOW\nPure logic algorithm from SYSTEM_SPEC.\n\n## File Scope\n- app/api/tasks/related/[id]/route.ts\n- lib/ai/relatedness-algorithm.ts\n\n## Acceptance Criteria\n- [ ] GET /api/tasks/related/[id] returns related tasks\n- [ ] Scoring algorithm (from SYSTEM_SPEC):\n  - Same note origin: +10\n  - Same goal: +8\n  - Common tags: +3 per tag\n  - Time proximity (same day): +5\n  - Time proximity (same week): +2\n  - Dependency relationship: +15\n- [ ] Sort by score DESC\n- [ ] Return top 5 related tasks\n- [ ] Response: { related_tasks: Task[], reasoning: string }\n- [ ] Reasoning explains why tasks are related\n\n## Algorithm Reference\nSee SYSTEM_SPEC §Feature 12\n\n## Dependencies\n- Tasks API: dumtasking-3dz","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:33.6154018+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:33.6154018+07:00","dependencies":[{"issue_id":"dumtasking-9el","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:45:33.6170139+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-9g0","title":"Focus Sessions API","description":"## Context\nCreate API for focus session tracking and history.\n\n## Risk: LOW\nStandard CRUD operations.\n\n## File Scope\n- app/api/focus-sessions/route.ts (GET, POST)\n- app/api/focus-sessions/[id]/route.ts (PATCH)\n\n## Acceptance Criteria\n- [ ] POST /api/focus-sessions creates session\n  - Fields: task_id, duration_minutes, started_at\n- [ ] PATCH /api/focus-sessions/[id] updates session\n  - Fields: ended_at, completed (boolean), notes\n- [ ] GET /api/focus-sessions returns user's sessions\n  - Query params: task_id, date_range\n  - Sort by started_at DESC\n- [ ] Response includes related task data\n- [ ] Session statistics: total time, completion rate\n- [ ] Weekly/monthly aggregation\n\n## Dependencies\nNone (independent feature)","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:57.1434419+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:57.1434419+07:00"}
{"id":"dumtasking-9w0","title":"Database Migration 003: Note Content JSONB","description":"## Context\nMigrate notes.content from TEXT to JSONB for Tiptap JSON storage, add full-text search column.\n\n## Risk: LOW\nStandard ALTER TABLE migration.\n\n## File Scope\n- supabase/migrations/003_note_content_jsonb.sql\n\n## Acceptance Criteria\n- [ ] ALTER TABLE notes ALTER COLUMN content TYPE JSONB\n- [ ] ADD COLUMN content_text TEXT\n- [ ] CREATE FUNCTION update_note_content_text() trigger function\n- [ ] CREATE TRIGGER to auto-update content_text from content JSONB\n- [ ] CREATE INDEX idx_notes_content_text_fts using GIN for full-text search\n- [ ] Migration tested: Apply and rollback\n- [ ] Existing notes migrated (if any)\n\n## SQL Example\n```sql\nALTER TABLE notes \n  ALTER COLUMN content TYPE JSONB USING content::JSONB;\n\nALTER TABLE notes ADD COLUMN content_text TEXT;\n\nCREATE OR REPLACE FUNCTION update_note_content_text()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.content_text := NEW.content::TEXT;\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER update_note_content_text_trigger\n  BEFORE INSERT OR UPDATE ON notes\n  FOR EACH ROW\n  EXECUTE FUNCTION update_note_content_text();\n\nCREATE INDEX idx_notes_content_text_fts \n  ON notes USING gin(to_tsvector('english', content_text));\n```\n\n## Dependencies\nNone","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:38.3059263+07:00","created_by":"mthangtr","updated_at":"2026-01-20T09:07:47.0834385+07:00","closed_at":"2026-01-20T09:07:47.0834385+07:00","close_reason":"Completed migration 003: Converted notes.content from TEXT to JSONB with content_text extraction, trigger function, and GIN full-text search index. All acceptance criteria met and tested successfully."}
{"id":"dumtasking-aml","title":"Calendar AI Scheduling Algorithm","description":"## Context\nImplement 'Optimize my week' AI scheduling algorithm.\n\n## Risk: LOW\nPure logic, no external dependencies.\n\n## File Scope\n- app/api/ai/optimize-week/route.ts\n- lib/ai/scheduling-algorithm.ts\n\n## Acceptance Criteria\n- [ ] POST /api/ai/optimize-week accepts { week_start: date }\n- [ ] Algorithm respects:\n  - Task priorities (high → morning)\n  - Dependencies (can't schedule before blockers)\n  - Working hours (user preferences)\n  - Energy levels (high energy tasks in morning)\n  - Protected slots (no scheduling)\n- [ ] Rebalances tasks across week for even distribution\n- [ ] Response: { optimized_schedule: Array\u003c{ task_id, scheduled_at }\u003e, reasoning: string }\n- [ ] 'Optimize my week' button in calendar\n- [ ] Confirmation dialog before applying\n- [ ] Undo functionality (restore previous schedule)\n\n## Dependencies\n- Calendar DnD: dumtasking-twa\n- AI Suggestions API (for algorithm reference): dumtasking-lze","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:07.4357175+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:07.4357175+07:00","dependencies":[{"issue_id":"dumtasking-aml","depends_on_id":"dumtasking-twa","type":"blocks","created_at":"2026-01-19T19:44:07.4367508+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-aml","depends_on_id":"dumtasking-lze","type":"blocks","created_at":"2026-01-19T19:44:07.4383643+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-amw","title":"Supabase Realtime Subscription Hook","description":"## Context\nCreate reusable hook for Supabase Realtime subscriptions across all views.\n\n## Risk: MEDIUM\nRealtime subscriptions, optimistic UI pattern.\n\n## File Scope\n- hooks/useRealtimeSubscription.ts\n- lib/supabase/realtime.ts\n\n## Acceptance Criteria\n- [ ] useRealtimeSubscription\u003cT\u003e(table, filter, onUpdate) hook\n- [ ] Subscribes to postgres_changes for INSERT, UPDATE, DELETE\n- [ ] Filters by user_id automatically\n- [ ] Optimistic UI helper functions:\n  - optimisticCreate(data)\n  - optimisticUpdate(id, data)\n  - optimisticDelete(id)\n- [ ] Rollback on error\n- [ ] Cleanup on unmount\n- [ ] TypeScript generics for type safety\n- [ ] Example usage in component\n\n## Example Usage\n```typescript\nconst { data, optimisticUpdate } = useRealtimeSubscription\u003cTask\u003e(\n  'tasks',\n  `user_id=eq.${user.id}`,\n  (event, payload) =\u003e {\n    if (event === 'UPDATE') {\n      // Update local state\n    }\n  }\n)\n```\n\n## Dependencies\n- Tasks API: dumtasking-3dz","notes":"Deprioritized: Single-user system, no workspace sharing. Realtime sync not needed for MVP.","status":"open","priority":4,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:43:03.2847728+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:22:16.7421324+07:00","dependencies":[{"issue_id":"dumtasking-amw","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:43:03.2876919+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-b81","title":"Phase 2: AI Intelligence","description":"Weeks 4-6: AI Task Extraction, Chat, Suggestions - Core AI features","status":"open","priority":1,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:58:48.1496754+07:00","created_by":"mthangtr","updated_at":"2026-01-19T14:58:48.1496754+07:00","dependencies":[{"issue_id":"dumtasking-b81","depends_on_id":"dumtasking-tof","type":"blocks","created_at":"2026-01-19T14:58:48.151086+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-b81","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T14:59:08.813634+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-bd2","title":"Kanban Drag-and-Drop Integration","description":"## Context\nImplement drag-and-drop for Kanban board using dnd-kit with Realtime sync.\n\n## Risk: MEDIUM\nDrag-drop state management complexity.\n\n## Dependencies to Install\n```bash\nbun add @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities\n```\n\n## File Scope\n- app/(dashboard)/kanban/page.tsx\n- components/views/KanbanBoard.tsx\n- components/views/KanbanColumn.tsx\n\n## Acceptance Criteria\n- [ ] @dnd-kit/sortable for drag-and-drop\n- [ ] Columns: To Do, In Progress, Done\n- [ ] Drag task between columns updates status\n- [ ] Optimistic UI with rollback on error\n- [ ] Realtime sync (see other users' changes)\n- [ ] Touch support for mobile\n- [ ] Accessibility (keyboard navigation)\n- [ ] Drop zones highlighted during drag\n- [ ] Animation smooth (CSS transitions)\n\n## Dependencies\n- Realtime Hook: dumtasking-amw","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:43:49.7839249+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:43:49.7839249+07:00","dependencies":[{"issue_id":"dumtasking-bd2","depends_on_id":"dumtasking-amw","type":"blocks","created_at":"2026-01-19T19:43:49.7850004+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-be0","title":"Settings: Implement BYOK API Keys with Encryption","description":"## Context\nImplement secure storage for user-provided API keys (BYOK).\n\n## Risk: HIGH\nSecurity-critical. Encryption must be done correctly. REQUIRES SPIKE.\n\n## Spike Required\nBefore implementation, validate:\n- AES-256-GCM encryption in Node.js/Edge runtime\n- Key derivation from ENCRYPTION_KEY env var\n- Secure key input UI pattern (masked, never logged)\n\n## File Scope\n- lib/crypto/encrypt.ts\n- lib/crypto/decrypt.ts\n- app/api/user/api-keys/route.ts\n- components/settings/ApiKeysSection.tsx\n\n## Acceptance Criteria\n- [ ] API key input with password-type masking\n- [ ] Keys encrypted with AES-256-GCM before storage\n- [ ] Encryption key from ENCRYPTION_KEY env var\n- [ ] Encrypted keys stored in users.api_keys JSONB\n- [ ] Keys NEVER returned to client (only 'configured: true/false')\n- [ ] Decryption only happens server-side when calling AI APIs\n- [ ] Test: Verify encrypted value is not plaintext in DB","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:55.4095298+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:11:52.1050079+07:00","dependencies":[{"issue_id":"dumtasking-be0","depends_on_id":"dumtasking-7k8","type":"blocks","created_at":"2026-01-19T15:03:23.0391395+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-be0","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:37.2021295+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-cje","title":"Spike: Streaming Chat Responses","description":"## Time-box\n30 minutes\n\n## Output Location\n.spikes/ai-integration/04-streaming-chat/\n\n## Question\nCan we stream chat responses from Claude using Vercel AI SDK?\n\n## Success Criteria\n- [ ] Streaming response working (chunked JSON)\n- [ ] Frontend receives and displays chunks in real-time\n- [ ] Stream errors handled gracefully\n- [ ] Code in .spikes/ai-integration/04-streaming-chat/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:40:17.7308684+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:34:52.2529484+07:00","closed_at":"2026-01-19T21:34:52.2529484+07:00","close_reason":"YES: Streaming works with streamText(). Abort handling supported.","dependencies":[{"issue_id":"dumtasking-cje","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:40:17.7329643+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-cje","depends_on_id":"dumtasking-x5n","type":"blocks","created_at":"2026-01-19T19:40:17.7361937+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-d29","title":"UI: Create Common Components (LoadingSpinner, ErrorBoundary, ConfirmDialog)","description":"## Context\nIntegrate ErrorBoundary component across application for graceful error handling.\n\n## Risk: LOW\nReact error boundary pattern.\n\n## File Scope\n- components/common/ErrorBoundary.tsx\n- app/layout.tsx (global error boundary)\n- app/(dashboard)/layout.tsx (dashboard error boundary)\n- app/error.tsx (Next.js error page)\n\n## Acceptance Criteria\n- [ ] ErrorBoundary component with fallback UI\n- [ ] Global error boundary in root layout\n- [ ] Route-level error boundaries for dashboard pages\n- [ ] Error logging (console + optional: Sentry)\n- [ ] Error details: component stack, error message\n- [ ] Reset button to recover\n- [ ] User-friendly error messages\n- [ ] Development vs production modes\n- [ ] Catch async errors (error boundaries + Suspense)\n\n## Note\nLoadingSpinner already exists, focus on ErrorBoundary only.\n\n## Dependencies\nNone","status":"closed","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:57.2388116+07:00","created_by":"mthangtr","updated_at":"2026-01-19T20:23:07.2585671+07:00","closed_at":"2026-01-19T20:23:07.2585671+07:00","close_reason":"ErrorBoundary component with ErrorFallback UI, Next.js error.tsx pages (global, dashboard), global-error.tsx for root layout errors, dev/prod modes, reset functionality, copy error details button","dependencies":[{"issue_id":"dumtasking-d29","depends_on_id":"dumtasking-p70","type":"blocks","created_at":"2026-01-19T15:03:13.3276827+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-d29","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:37.3729306+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-dua","title":"Database Schema: Create Core Tables Migration","description":"## Context\nCreate Supabase migration for all core tables per SYSTEM_SPEC.md Section 5.\n\n## Risk: MEDIUM\nSchema design decisions affect all downstream features. Need careful index planning.\n\n## File Scope\n- supabase/migrations/001_initial_schema.sql\n- types/database.ts (generated types)\n\n## Acceptance Criteria\n- [ ] Migration file creates: users, notes, tasks, protected_slots, chat_messages, weekly_reviews, focus_sessions\n- [ ] All indexes created per SYSTEM_SPEC.md (idx_notes_user_id, idx_tasks_status_priority, etc.)\n- [ ] JSONB columns have proper defaults\n- [ ] CHECK constraints on status, priority, energy_level enums\n- [ ] Foreign key relationships with proper ON DELETE behavior\n- [ ] Migration runs successfully: supabase db push\n- [ ] TypeScript types generated: supabase gen types typescript","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:26.1307654+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:39:48.359368+07:00","closed_at":"2026-01-19T15:39:48.359368+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-dua","depends_on_id":"dumtasking-yhp","type":"blocks","created_at":"2026-01-19T15:03:07.5372824+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-dua","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:29.8046649+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-gc6","title":"Loading States \u0026 Suspense Boundaries","description":"## Context\nAdd loading states with Suspense boundaries and skeleton loaders for all pages.\n\n## Risk: LOW\nReact Suspense pattern.\n\n## File Scope\n- app/(dashboard)/*/loading.tsx (loading pages)\n- components/common/LoadingSpinner.tsx (extend)\n- components/common/Skeleton.tsx (new)\n\n## Acceptance Criteria\n- [ ] loading.tsx for each dashboard route:\n  - /notes/loading.tsx\n  - /kanban/loading.tsx\n  - /calendar/loading.tsx\n  - /table/loading.tsx\n  - /focus/[taskId]/loading.tsx\n- [ ] Skeleton loaders match actual content structure\n- [ ] Suspense boundaries for data fetching\n- [ ] Progressive loading (show UI shell first)\n- [ ] Smooth transitions (fade-in animation)\n- [ ] Loading indicators for mutations (button spinners)\n- [ ] Global loading bar for route transitions\n\n## Skeleton Components\n- NoteCardSkeleton\n- TaskCardSkeleton\n- TableRowSkeleton\n- CalendarSkeleton\n\n## Dependencies\nNone","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:46:30.3661168+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:46:30.3661168+07:00"}
{"id":"dumtasking-jxf","title":"Auth: Create Auth Context \u0026 Protected Routes","description":"## Context\nCreate AuthProvider context and middleware for route protection.\n\n## Risk: LOW\nStandard Next.js middleware pattern.\n\n## File Scope\n- contexts/AuthContext.tsx\n- hooks/useAuth.ts\n- middleware.ts (Next.js middleware)\n- lib/auth/protected-routes.ts\n\n## Acceptance Criteria\n- [ ] AuthProvider wraps app with user state\n- [ ] useAuth() hook returns { user, isLoading, signOut }\n- [ ] Middleware protects /dashboard/* routes\n- [ ] Unauthenticated users redirected to /login\n- [ ] Auth state persists across page refreshes\n- [ ] Sign out clears session and redirects to home","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:34.9271704+07:00","created_by":"mthangtr","updated_at":"2026-01-19T16:49:51.0531063+07:00","closed_at":"2026-01-19T16:49:51.0531063+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-jxf","depends_on_id":"dumtasking-v69","type":"blocks","created_at":"2026-01-19T15:03:09.2826248+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-jxf","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:30.6332486+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-l7i","title":"Phase 4: Advanced \u0026 Execution","description":"Weeks 10-12: Related Tasks, Protected Slots, Focus Mode, Accountability, Weekly Review, Time Tracking","status":"open","priority":2,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:58:50.8916056+07:00","created_by":"mthangtr","updated_at":"2026-01-19T14:58:50.8916056+07:00","dependencies":[{"issue_id":"dumtasking-l7i","depends_on_id":"dumtasking-tof","type":"blocks","created_at":"2026-01-19T14:58:50.8932478+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-l7i","depends_on_id":"dumtasking-17z","type":"blocks","created_at":"2026-01-19T14:59:09.1244234+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-l7i","depends_on_id":"dumtasking-b81","type":"blocks","created_at":"2026-01-19T14:59:09.2684999+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-lze","title":"AI Suggestions API","description":"## Context\nImplement /api/ai/suggestions for smart daily task recommendations.\n\n## Risk: LOW\nPure logic algorithm, no external API dependency.\n\n## File Scope\n- app/api/ai/suggestions/route.ts\n- lib/ai/suggestion-algorithm.ts\n\n## Acceptance Criteria\n- [ ] GET /api/ai/suggestions returns top 3 tasks for today\n- [ ] Algorithm:\n  1. Filter: due today/overdue/high priority, status=todo\n  2. Remove blocked tasks (dependencies not complete)\n  3. Sort: priority DESC, due_date ASC, estimated_time ASC\n  4. Balance: sum(estimated_time) \u003c= user working_hours\n- [ ] Response: { suggestions: Task[], insights: { workload, blocked_count, urgent_count } }\n- [ ] Workload indicator: light (\u003c4h), balanced (4-8h), heavy (\u003e8h)\n- [ ] Consider energy_level field (high energy tasks in morning)\n- [ ] Unit tests for algorithm edge cases\n\n## Dependencies\n- Tasks API: dumtasking-3dz","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:42:15.3357109+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:50:47.7393177+07:00","closed_at":"2026-01-19T21:50:47.7393177+07:00","close_reason":"Implemented AI suggestions API with scoring algorithm","dependencies":[{"issue_id":"dumtasking-lze","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:42:15.3373013+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-mfl","title":"Spike: Tool Calling with Mock Functions","description":"## Time-box\n45 minutes\n\n## Output Location\n.spikes/ai-integration/05-tool-calling/\n\n## Question\nDoes tool calling work with 8 functions (extract_tasks, update_task, etc.)?\n\n## Success Criteria\n- [ ] 3+ mock tool functions defined\n- [ ] AI successfully calls tools based on context\n- [ ] Tool results returned to AI for follow-up\n- [ ] Code in .spikes/ai-integration/05-tool-calling/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:40:24.8227336+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:34:52.5880359+07:00","closed_at":"2026-01-19T21:34:52.5880359+07:00","close_reason":"YES: Tool calling works but model selection is inconsistent. Tools execute correctly when model chooses to use them.","dependencies":[{"issue_id":"dumtasking-mfl","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:40:24.8248864+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-mfl","depends_on_id":"dumtasking-cje","type":"blocks","created_at":"2026-01-19T19:40:24.8270029+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-oxy","title":"Focus Celebration Animation","description":"## Context\nAdd celebration animation and sound when focus session completes successfully.\n\n## Risk: LOW\nSimple animation library integration.\n\n## Dependencies to Install\n```bash\nbun add canvas-confetti\n```\n\n## File Scope\n- components/focus/FocusCelebration.tsx\n- public/sounds/success.mp3\n\n## Acceptance Criteria\n- [ ] Confetti animation on timer completion\n- [ ] Success sound effect\n- [ ] Congratulatory message\n- [ ] Task completion prompt: 'Mark task as done?'\n- [ ] Session summary: time focused, breaks taken\n- [ ] Share button (future: social sharing)\n- [ ] Continue button (start next pomodoro)\n- [ ] Return to task button\n\n## Celebration Triggers\n- Pomodoro cycle complete (4 focus + breaks)\n- Task marked as done after focus session\n- Personal best (longest focus streak)\n\n## Dependencies\n- Focus PiP Timer: dumtasking-zdc\n- Focus Sessions API: dumtasking-9g0","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:06.7239261+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:06.7239261+07:00","dependencies":[{"issue_id":"dumtasking-oxy","depends_on_id":"dumtasking-zdc","type":"blocks","created_at":"2026-01-19T19:45:06.7255172+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-oxy","depends_on_id":"dumtasking-9g0","type":"blocks","created_at":"2026-01-19T19:45:06.7270919+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-p70","title":"Project Setup: Initialize Next.js 16 with shadcn/ui mira style","description":"## Context\nSetup Next.js 16 (App Router), React 19, TypeScript strict, Tailwind 4, shadcn/ui (mira style, zinc theme).\n\n## Risk: LOW\nPattern well-documented, no novel integration.\n\n## File Scope\n- Root config files: package.json, tsconfig.json, next.config.ts, tailwind.config.ts\n- app/layout.tsx, app/page.tsx, app/globals.css\n- components/ui/** (shadcn primitives)\n- lib/utils.ts\n\n## Acceptance Criteria\n- [ ] Next.js 16 initialized with App Router\n- [ ] TypeScript strict mode enabled\n- [ ] Tailwind CSS 4 configured\n- [ ] shadcn/ui initialized with mira style, zinc theme (bunx shadcn@latest init)\n- [ ] Folder structure matches SYSTEM_SPEC.md Section 6\n- [ ] bun dev runs without errors\n- [ ] bun lint passes","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:23.1225939+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:36:34.9172803+07:00","closed_at":"2026-01-19T15:36:34.9172803+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-p70","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:28.5025489+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-q4r","title":"Epic: AI Integration Validation (Spikes)","status":"closed","priority":0,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:39:41.4802577+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:36:28.9242827+07:00","closed_at":"2026-01-19T21:36:28.9242827+07:00","close_reason":"All 6 spikes completed: OpenRouter, Structured Output, Streaming, Retry, Tool Calling, Context Injection"}
{"id":"dumtasking-t2j","title":"Spike: Error Handling and Retry Logic","description":"## Time-box\n30 minutes\n\n## Output Location\n.spikes/ai-integration/03-error-retry/\n\n## Question\nHow to handle rate limits, API errors, and implement retry logic?\n\n## Success Criteria\n- [ ] Rate limit error detected and handled\n- [ ] Exponential backoff retry implemented\n- [ ] Network errors caught and retried\n- [ ] Code in .spikes/ai-integration/03-error-retry/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:40:11.3894952+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:34:51.9105315+07:00","closed_at":"2026-01-19T21:34:51.9105315+07:00","close_reason":"YES: Retry with exponential backoff works. Created lib/ai/retry.ts","dependencies":[{"issue_id":"dumtasking-t2j","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:40:11.3911447+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-t2j","depends_on_id":"dumtasking-x5n","type":"blocks","created_at":"2026-01-19T19:40:11.3922929+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-t54","title":"Settings Profile API","description":"## Context\nCreate API endpoints for user profile CRUD operations.\n\n## Risk: LOW\nStandard Supabase auth.update() pattern.\n\n## File Scope\n- app/api/settings/profile/route.ts (GET, PATCH)\n- app/api/settings/preferences/route.ts (GET, PATCH)\n\n## Acceptance Criteria\n- [ ] GET /api/settings/profile returns user profile\n- [ ] PATCH /api/settings/profile updates name, timezone, working_hours\n- [ ] GET /api/settings/preferences returns user preferences\n- [ ] PATCH /api/settings/preferences updates llm_model, pomodoro settings, etc.\n- [ ] Supabase auth.update() used for auth.users fields\n- [ ] users table updated for custom fields\n- [ ] Error handling for validation failures\n- [ ] TypeScript types from database schema\n\n## Dependencies\nDepends on: dumtasking-be0 (BYOK implementation)","status":"open","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:41:28.9588585+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:41:28.9588585+07:00","dependencies":[{"issue_id":"dumtasking-t54","depends_on_id":"dumtasking-be0","type":"blocks","created_at":"2026-01-19T19:41:28.9616177+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-tof","title":"dumtasking MVP","status":"closed","priority":1,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:53:58.4257908+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:04:25.9284863+07:00","closed_at":"2026-01-19T15:04:25.9284863+07:00","close_reason":"MVP epic is a container/milestone, closing to unblock Phase 1 implementation tasks"}
{"id":"dumtasking-tpx","title":"Daily Suggestions Integration","description":"## Context\nHook up Daily Suggestions component to real API and enable AI chat widget.\n\n## Risk: LOW\nFrontend integration, APIs already working.\n\n## File Scope\n- app/(dashboard)/notes/page.tsx (Daily Suggestions section)\n- components/ai/chat-widget.tsx\n\n## Acceptance Criteria\n- [ ] Daily Suggestions fetch from /api/ai/suggestions\n- [ ] Display top 3 tasks with priorities and time estimates\n- [ ] 'Start' button opens Focus Mode for that task\n- [ ] Workload indicator shows correct color (green/yellow/red)\n- [ ] Quick insights display (overdue, blocked counts)\n- [ ] Refresh button to regenerate suggestions\n- [ ] AI Chat Widget connects to /api/ai/chat\n- [ ] Quick action buttons call respective commands\n- [ ] Chat history persisted and loaded on mount\n- [ ] Streaming messages display in real-time\n\n## Dependencies\n- AI Suggestions API: dumtasking-lze\n- AI Chat API: dumtasking-xdg","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:42:24.638489+07:00","created_by":"mthangtr","updated_at":"2026-01-19T23:04:30.4375678+07:00","closed_at":"2026-01-19T23:04:30.4375678+07:00","close_reason":"Implemented Daily Suggestions and AI Chat integrations: 1) DailySuggestions component fetches from /api/ai/suggestions, displays top 3 tasks with priorities/time estimates, shows workload indicator (green/yellow/red), and has refresh functionality. 2) AIChatWidget now connects to /api/ai/chat with real streaming, localStorage persistence for history, abort controller support, and clear history option.","dependencies":[{"issue_id":"dumtasking-tpx","depends_on_id":"dumtasking-lze","type":"blocks","created_at":"2026-01-19T19:42:24.6400608+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-tpx","depends_on_id":"dumtasking-xdg","type":"blocks","created_at":"2026-01-19T19:42:24.6422305+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-tun","title":"Protected Slots Recurrence \u0026 Visualization","description":"## Context\nAdd recurrence logic for protected slots and visualize in calendar.\n\n## Risk: MEDIUM\nRRULE parsing complexity.\n\n## Dependencies to Install\n```bash\nbun add rrule\n```\n\n## File Scope\n- lib/recurrence.ts (RRULE helpers)\n- components/views/CalendarView.tsx (extend)\n- app/(dashboard)/settings/page.tsx (Protected Slots section)\n\n## Acceptance Criteria\n- [ ] Recurrence editor UI in Settings\n  - Repeat: daily, weekly, monthly\n  - Days of week selector (for weekly)\n  - End date or never\n- [ ] RRULE string generation\n- [ ] Store recurrence_rule in protected_slots table\n- [ ] Calendar visualization:\n  - Green border for protected slots\n  - Diagonal stripe pattern\n  - Icon indicator (lock, coffee, meeting)\n- [ ] AI scheduling respects protected slots (no task scheduling)\n- [ ] Conflict detection when creating tasks manually\n- [ ] Auto-schedule breaks (15min after 2h, 30min lunch)\n\n## Dependencies\n- Protected Slots API: dumtasking-2cr\n- Calendar View: dumtasking-twa","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:24.1193562+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:24.1193562+07:00","dependencies":[{"issue_id":"dumtasking-tun","depends_on_id":"dumtasking-2cr","type":"blocks","created_at":"2026-01-19T19:45:24.1204002+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-tun","depends_on_id":"dumtasking-twa","type":"blocks","created_at":"2026-01-19T19:45:24.1219966+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-twa","title":"Calendar Drag-and-Drop Integration","description":"## Context\nImplement drag-and-drop reschedule for Calendar view.\n\n## Risk: MEDIUM\nCalendar library integration complexity.\n\n## Dependencies to Install\n```bash\nbun add fullcalendar @fullcalendar/react @fullcalendar/daygrid @fullcalendar/timegrid @fullcalendar/interaction\n# OR build custom calendar with date-fns\n```\n\n## File Scope\n- app/(dashboard)/calendar/page.tsx\n- components/views/CalendarView.tsx\n\n## Acceptance Criteria\n- [ ] Week view as primary view\n- [ ] Drag task to new date/time reschedules\n- [ ] PATCH /api/tasks/[id] with new scheduled_at\n- [ ] Optimistic UI with rollback\n- [ ] Realtime sync for concurrent edits\n- [ ] Time block visualization (task duration)\n- [ ] Density indicator: Green (\u003c6h), Yellow (6-8h), Red (\u003e8h) per day\n- [ ] Resize task to change duration\n- [ ] Click task opens task modal\n\n## Dependencies\n- Realtime Hook: dumtasking-amw","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:43:58.2204554+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:43:58.2204554+07:00","dependencies":[{"issue_id":"dumtasking-twa","depends_on_id":"dumtasking-amw","type":"blocks","created_at":"2026-01-19T19:43:58.2221998+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-ugo","title":"Related Tasks Panel Component","description":"## Context\nCreate UI panel to display related tasks when viewing a task.\n\n## Risk: LOW\nStandard component creation.\n\n## File Scope\n- components/tasks/RelatedTasksPanel.tsx\n- components/tasks/TaskModal.tsx (extend)\n\n## Acceptance Criteria\n- [ ] Related tasks section in TaskModal\n- [ ] Fetch from /api/tasks/related/[id]\n- [ ] Display up to 5 related tasks\n- [ ] Each task shows: title, status badge, priority\n- [ ] Click task opens it in modal (nested modal or replace)\n- [ ] Shows reasoning for relationship (tooltip)\n- [ ] Visual connection indicators (lines, badges)\n- [ ] Loading state while fetching\n- [ ] Empty state: 'No related tasks found'\n- [ ] Refresh button to regenerate\n\n## Dependencies\n- Related Tasks API: dumtasking-9el","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:45:41.4509481+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:45:41.4509481+07:00","dependencies":[{"issue_id":"dumtasking-ugo","depends_on_id":"dumtasking-9el","type":"blocks","created_at":"2026-01-19T19:45:41.4521376+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-v69","title":"Auth: Implement Supabase Magic Link Authentication","description":"## Context\nImplement Supabase magic link (passwordless) authentication.\n\n## Risk: LOW\nStandard Supabase Auth pattern, well-documented.\n\n## File Scope\n- app/(auth)/login/page.tsx\n- app/(auth)/callback/route.ts\n- app/api/auth/callback/route.ts\n\n## Acceptance Criteria\n- [ ] Login page with email input and magic link form\n- [ ] Form submission calls supabase.auth.signInWithOtp()\n- [ ] Success message shows 'Check your email'\n- [ ] Auth callback route handles code exchange\n- [ ] Redirects to dashboard after successful auth\n- [ ] Error states handled gracefully (invalid link, expired)\n- [ ] Loading states during auth flow","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:34.0044306+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:49:51.1323255+07:00","closed_at":"2026-01-19T15:49:51.1323255+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-v69","depends_on_id":"dumtasking-yhp","type":"blocks","created_at":"2026-01-19T15:03:08.7249623+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-v69","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:30.5947238+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-x5n","title":"Spike: OpenRouter + Claude Basic Integration","description":"## Time-box\n30 minutes\n\n## Output Location\n.spikes/ai-integration/01-openrouter-claude/\n\n## Question\nCan we successfully call Claude via OpenRouter with Vercel AI SDK?\n\n## Success Criteria\n- [ ] Working API call to Claude 3.7 Sonnet via OpenRouter\n- [ ] Response received and parsed\n- [ ] Basic error handling tested (invalid API key)\n- [ ] Code in .spikes/ai-integration/01-openrouter-claude/test.ts\n\n## On Completion\nClose with: bd close \u003cid\u003e --reason \"YES: \u003capproach\u003e\" or \"NO: \u003cblocker\u003e\"","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:39:57.7842005+07:00","created_by":"mthangtr","updated_at":"2026-01-19T21:30:02.979253+07:00","closed_at":"2026-01-19T21:30:02.979253+07:00","close_reason":"YES: OpenRouter + Claude Haiku 4.5 works with Vercel AI SDK","dependencies":[{"issue_id":"dumtasking-x5n","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:39:57.7858329+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-xdg","title":"AI Chat API with Streaming","description":"## Context\nImplement /api/ai/chat with streaming responses and tool calling.\n\n## Risk: HIGH → MEDIUM (after spikes)\nStreaming + tool calling complexity. Spikes validate approach.\n\n## Learnings from Spikes\n- Spike dumtasking-cje: Streaming pattern\n- Spike dumtasking-mfl: Tool calling pattern\n- Spike dumtasking-39x: Context injection\n- Reference code in .spikes/ai-integration/\n\n## File Scope\n- app/api/ai/chat/route.ts\n- lib/ai/tools.ts (tool definitions)\n- lib/ai/context-builder.ts\n\n## Acceptance Criteria\n- [ ] POST /api/ai/chat accepts { messages: Message[] }\n- [ ] Streaming response using Vercel AI SDK\n- [ ] 8 tools implemented:\n  - extract_tasks(note_id)\n  - update_task(task_id, updates)\n  - search_tasks(query)\n  - reschedule_tasks(task_ids, new_dates)\n  - generate_summary(date_range)\n  - optimize_schedule(date_range)\n  - find_blockers()\n  - suggest_next_task(time, energy_level)\n- [ ] Context injection: user tasks, notes, calendar\n- [ ] Message persistence to chat_messages table\n- [ ] Error handling for stream interruptions\n\n## Dependencies\n- Spike epic: dumtasking-q4r\n- Tasks API: dumtasking-3dz","status":"closed","priority":1,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:42:06.2160629+07:00","created_by":"mthangtr","updated_at":"2026-01-19T22:00:00.2858163+07:00","closed_at":"2026-01-19T22:00:00.2858163+07:00","close_reason":"Implemented AI Chat API with streaming support at POST /api/ai/chat. Created lib/ai/tools.ts (8 tools: extract_tasks, update_task, search_tasks, reschedule_tasks, generate_summary, optimize_schedule, find_blockers, suggest_next_task), lib/ai/context-builder.ts (system prompt builder with task/note context injection), and app/api/ai/chat/route.ts (streaming endpoint using AI SDK v6 with authentication, tool calling, and abort handling). Updated lib/ai/index.ts with exports.","dependencies":[{"issue_id":"dumtasking-xdg","depends_on_id":"dumtasking-q4r","type":"blocks","created_at":"2026-01-19T19:42:06.2171355+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-xdg","depends_on_id":"dumtasking-3dz","type":"blocks","created_at":"2026-01-19T19:42:06.2187073+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-yhp","title":"Setup Supabase Project \u0026 Environment Variables","description":"## Context\nCreate Supabase project, configure environment variables, setup client.\n\n## Risk: LOW\nStandard Supabase setup, well-documented.\n\n## File Scope\n- .env.local, .env.example\n- lib/supabase/client.ts (browser client)\n- lib/supabase/server.ts (server client with cookies)\n- lib/supabase/middleware.ts\n\n## Acceptance Criteria\n- [ ] Supabase project created (or placeholder env vars documented)\n- [ ] .env.example with all required vars (SUPABASE_URL, ANON_KEY, SERVICE_ROLE_KEY, OPENROUTER_API_KEY, ENCRYPTION_KEY)\n- [ ] @supabase/supabase-js and @supabase/ssr installed\n- [ ] Browser client configured for client components\n- [ ] Server client configured with cookie handling\n- [ ] Middleware helper for auth session refresh","status":"closed","priority":0,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T15:02:24.6783406+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:38:29.8447774+07:00","closed_at":"2026-01-19T15:38:29.8447774+07:00","close_reason":"Closed","dependencies":[{"issue_id":"dumtasking-yhp","depends_on_id":"dumtasking-p70","type":"blocks","created_at":"2026-01-19T15:03:06.6327406+07:00","created_by":"mthangtr"},{"issue_id":"dumtasking-yhp","depends_on_id":"dumtasking-yq2","type":"blocks","created_at":"2026-01-19T15:03:28.9476168+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-yq2","title":"Phase 1: Foundation","description":"Weeks 1-3: Auth, DB, Notes, Settings - Core infrastructure","status":"closed","priority":0,"issue_type":"epic","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T14:58:46.8781011+07:00","created_by":"mthangtr","updated_at":"2026-01-19T15:04:30.2915103+07:00","closed_at":"2026-01-19T15:04:30.2915103+07:00","close_reason":"Phase 1 epic is a container/milestone, closing to unblock implementation tasks","dependencies":[{"issue_id":"dumtasking-yq2","depends_on_id":"dumtasking-tof","type":"blocks","created_at":"2026-01-19T14:58:46.88101+07:00","created_by":"mthangtr"}]}
{"id":"dumtasking-zdc","title":"Focus Mode PiP Timer","description":"## Context\nImplement Picture-in-Picture floating timer and Fullscreen mode for Focus Mode.\n\n## Risk: MEDIUM\nBrowser APIs (PiP, Fullscreen) complexity.\n\n## File Scope\n- app/(dashboard)/focus/[taskId]/page.tsx\n- components/focus/PipTimer.tsx\n- components/focus/PomodoroTimer.tsx\n\n## Acceptance Criteria\n- [ ] Pomodoro timer: 25min focus / 5min break (customizable)\n- [ ] Long break after 4 pomodoros (15min)\n- [ ] Picture-in-Picture API for floating timer\n- [ ] PiP window stays on top when user switches tabs\n- [ ] Fullscreen API for immersive mode\n- [ ] Exit fullscreen button\n- [ ] Timer state persists across PiP/Fullscreen\n- [ ] Start/Pause/Reset controls\n- [ ] Visual progress (circular progress bar)\n- [ ] Notification when timer ends (Notifications API)\n\n## Dependencies\nNone (independent feature)","status":"open","priority":2,"issue_type":"task","owner":"cccccc9712@gmail.com","created_at":"2026-01-19T19:44:40.5811401+07:00","created_by":"mthangtr","updated_at":"2026-01-19T19:44:40.5811401+07:00"}
